{"version":3,"sources":["socket.js","components/Home/Home.js","components/TimeBox/TimeBox.js","components/UpperBar/UpperBar.js","components/Video/VideoCard.js","components/BottomBar/BottomBar.js","components/Chat/Chat.js","components/MeetRoom/MeetRoom.js","App.js","index.js"],"names":["sockets","io","Home","props","roomRef","useRef","userRef","useState","err","setErr","errMsg","setErrMsg","useEffect","socket","on","error","roomName","current","value","userName","sessionStorage","setItem","history","push","className","src","id","style","color","data-scroll-reveal","for","type","ref","placeholder","onClick","emit","roomId","alert","Timecontainer","styled","div","TimeBox","Date","date","setDate","timer","setInterval","clearInterval","toLocaleTimeString","Bar","Center","Title","Right","UpperBar","MeetTitle","MemberCount","Video","video","VideoCard","peer","stream","srcObject","track","playsInline","autoPlay","FaIcon","i","Left","CameraButton","SwitchMenu","ChatButton","ScreenButton","StopButton","SwitchList","BottomBar","openChat","goToBack","toggleCameraAudio","userVideoAudio","startScreenSharing","screenShare","videoDevices","showVideoDevices","setShowVideoDevices","handleToggling","useCallback","e","state","data-switch","length","map","device","console","log","label","audio","input","Chat","display","getItem","msg","setMsg","messagesEndRef","sender","msgs","scrollToBottom","scrollIntoView","behavior","RoomContainer","VideoAndBarContainer","VideoContainer","MyVideo","VideoWindow","UserName","MeetRoom","currentUser","peers","setPeers","localUser","setUserVideoAudio","setVideoDevices","displayChat","setDisplayChat","setScreenShare","peersRef","userVideoRef","screenTrackRef","userStream","match","params","findPeer","find","p","peerID","createUserVideo","index","arr","expandScreen","key","hasOwnProperty","writeUserName","number","navigator","mediaDevices","enumerateDevices","then","devices","filtered","filter","kind","window","addEventListener","getUserMedia","users","forEach","userId","info","caller","Peer","initiator","trickle","signal","userToCall","from","destroy","createPeer","preList","incomingSignal","callerId","to","addPeer","answerId","peerIdx","user","switchTarget","disconnect","preventDefault","leaver","removeItem","location","href","elem","target","requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","muted","playInline","onended","getDisplayMedia","cursor","screenTrack","getTracks","replaceTrack","streams","stopPropagation","getAttribute","videoSwitch","audioSwitch","getVideoTracks","enabled","userAudioTrack","getAudioTracks","App","exact","path","component","Main","Room","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7159a1d6.chunk.js","sourcesContent":["//imports\nimport io from 'socket.io-client';\n//---------------------------------------------\n\n// const sockets = io('http://localhost:3000', { autoConnect: true, forceNew: true });\nconst sockets = io('/');\n\nexport default sockets;\n","//imports\nimport React, { useRef, useState, useEffect } from 'react';\nimport socket from '../../socket';\n\n//------------------------------------------------------------------------------------------\n\nconst Home = (props) => {\n    const roomRef = useRef();\n    const userRef = useRef();\n    const [err, setErr] = useState(false);\n    const [errMsg, setErrMsg] = useState('');\n\n    useEffect(() => {\n\n        socket.on('duplicate-user', ({ error }) => {\n            if (!error) {\n                // save the username and meeting title entered by user\n                const roomName = roomRef.current.value\n                const userName = userRef.current.value\n                sessionStorage.setItem('user', userName);\n                props.history.push(`/room/${roomName}`);\n            } else {\n                setErr(error);\n                setErrMsg('User name already exists');\n            }\n        });\n    }, [props.history]);\n\n    // when join meet button is pressed\n    function clickJoin() {\n        // save the username and meeting title entered by user\n        const roomName = roomRef.current.value;\n        const userName = userRef.current.value;\n\n\n        // if username or title is missing, display an error message\n        if (!roomName || !userName) {\n            setErr(true);\n            setErrMsg('Enter both Username and Meeting Title');\n            alert('Enter both Username and Meeting Title');\n        }\n        else {\n            socket.emit('check-user', { roomId: roomName, userName });\n            sessionStorage.setItem('user', userName);\n            props.history.push(`/room/${roomName}`);\n        }\n    }\n    return (\n        <>\n            {/* navbar starts */}\n            <header className=\"header-area header-sticky\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-12\">\n                            <nav className=\"main-nav\">\n                                {/* main logo */}\n                                <div className=\"logo\">\n                                    <img src=\"images\\logo_no_bg.png\"></img>\n                                </div>\n                                {/* title of webapp */}\n                                <div className=\"logo\">\n                                    Microsoft Teams\n                                </div>\n                            </nav>\n                        </div>\n                    </div>\n                </div>\n            </header>\n            {/* navbar ends */}\n\n            {/* welcome area starts */}\n            <div className=\"welcome-area\" id=\"welcome\">\n                <div className=\"header-text\">\n                    <div className=\"container\">\n                        <div className=\"row\">\n                            <div className=\"offset-xl-3 col-xl-6 offset-lg-2 col-lg-8 col-md-12 col-sm-12\">\n                                <h1 style={{ color: \"black\" }}><strong>Microsoft Teams Clone</strong><br /> </h1>\n                                <h4 style={{ color: \"black\" }}>Welcome to Microsoft Teams. <br />Collaborate with your coworkers or coordinate with your social groups in one app. </h4>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            {/* welcome area ends */}\n\n            {/* Join meeting box starts */}\n            <section className=\"section home-feature\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-lg-12\">\n                            <div className=\"row\">\n                                <div className=\"col-lg-3 col-md-3 col-sm-12\" data-scroll-reveal=\"enter bottom move 50px over 0.6s after 0.2s\">\n                                </div>\n\n                                <div className=\"col-lg-6 col-md-6 col-sm-12\" data-scroll-reveal=\"enter bottom move 50px over 0.6s after 0.2s\">\n                                    <div className=\"features-small-item\">\n                                        <br />\n                                        {/* username input */}\n                                        <div className=\"form-floating mb-3\">\n                                            <label for=\"floatingInput\"><b>Username</b></label>\n                                            <input type=\"text\" className=\"form-control\" id=\"userName\" ref={userRef} placeholder=\"Please Enter User Name\" />\n                                        </div>\n\n                                        {/* Meeting title input */}\n                                        <div className=\"form-floating\">\n                                            <label for=\"floatingPassword\"><b>Meeting Title</b></label>\n                                            <input type=\"text\" className=\"form-control\" id=\"roomName\" ref={roomRef} placeholder=\"Please Enter Meeting Title\" />\n                                        </div>\n\n                                        <br />\n                                        {/* join meet button */}\n                                        <button className=\"btn-md myButton\" onClick={clickJoin}>Join Meet</button>\n                                        <br />\n                                        <br />\n                                        {/* if username or title is missing, error is displayed */}\n                                        {err ? <p style={{ color: \"red\" }}>{errMsg}</p> : null}\n\n                                    </div>\n                                </div>\n                                <div className=\"col-lg-3 col-md-3 col-sm-12\" data-scroll-reveal=\"enter bottom move 50px over 0.6s after 0.2s\">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n            {/* join meeting box ends */}\n        </>\n\n    );\n\n};\nexport default Home;\n","//imports\nimport  React, { useState , useEffect } from 'react';\nimport styled from 'styled-components';\n//---------------------------------------------------------------------------\n\nexport const TimeBox = () => {\n\n    var [date,setDate] = useState(new Date());\n    \n    useEffect(() => {\n        var timer = setInterval(()=>setDate(new Date()), 1000 )\n        return function cleanup() {\n            clearInterval(timer)\n        }\n    \n    });\n\n    return(\n        <Timecontainer>\n            <p> {date.toLocaleTimeString()}</p>\n        </Timecontainer>\n    )\n};\n\n//-------------------------------------------------------------------------------\n// styled components:\n\nconst Timecontainer = styled.div`\n  color: white;\n`;\n\nexport default TimeBox;\n","// imports\r\nimport React from 'react';\r\nimport styled from 'styled-components';\r\nimport TimeBox from '../TimeBox/TimeBox.js';\r\n//-------------------------------------------------------------------------------\r\n\r\nconst UpperBar = ({\r\n    MeetTitle,\r\n    MemberCount\r\n}) => {\r\n\r\n    return (\r\n        <Bar>\r\n            <Center>\r\n                <Title>\r\n                    <div>{MeetTitle}</div>\r\n                </Title>\r\n            </Center>\r\n            <Right>\r\n                <div>Members: {MemberCount}</div>\r\n            </Right>\r\n            <TimeBox />\r\n\r\n        </Bar>\r\n    );\r\n};\r\n\r\n//------------------------------------------------------------------------------------\r\n// styled components:\r\n\r\nconst Bar = styled.div`\r\n  position: absolute;\r\n  padding: 10px;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 6%;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-weight: 500;\r\n  background-color: #6264a7;\r\n`;\r\nconst Center = styled.div`\r\n  flex:1;\r\n  display: flex;\r\n`;\r\n\r\nconst Title = styled.div`\r\n  color: white;\r\n`;\r\nconst Right = styled.div`\r\n  color:white;\r\n  margin-right: 20px;\r\n`;\r\n\r\nexport default UpperBar;\r\n","//imports\nimport React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\n//-----------------------------------------------------------------------------\n\nconst VideoCard = (props) => {\n  const ref = useRef();\n  const peer = props.peer;\n  \n  useEffect(() => {\n    peer.on('stream', (stream) => {\n      ref.current.srcObject = stream;\n    });\n    peer.on('track', (track, stream) => {\n    });\n  }, [peer]);\n\n  return (\n    <Video\n      playsInline\n      autoPlay\n      ref={ref}\n    />\n  );\n};\n\n//-------------------------------------------------------------------------------\n// styled components:\n\nconst Video = styled.video``;\n\nexport default VideoCard;\n","//imports\nimport React, { useCallback } from 'react';\nimport styled from 'styled-components';\nimport './BottomBar.css';\n//-------------------------------------------------------------------------\n\nconst BottomBar = ({\n  openChat,\n  goToBack,\n  toggleCameraAudio,\n  userVideoAudio,\n  startScreenSharing,\n  screenShare,\n  videoDevices,\n  showVideoDevices,\n  setShowVideoDevices\n}) => {\n  const handleToggling = useCallback((e) => {\n    setShowVideoDevices((state) => !state);\n  },\n    [setShowVideoDevices]\n  );\n\n  return (\n    <Bar>\n      {/* Left side components - mic button, video button*/}\n      <Left>\n\n        <CameraButton onClick={toggleCameraAudio} data-switch='video'>\n          <div>\n            {userVideoAudio.video ? (\n              <FaIcon className='fas fa-video'></FaIcon>\n            ) : (\n              <FaIcon className='fas fa-video-slash'></FaIcon>\n            )}\n          </div>\n          Camera\n        </CameraButton>\n\n        {showVideoDevices && (\n          <SwitchList>\n            {videoDevices.length > 0 &&\n              videoDevices.map((device) => {\n                console.log(device);\n                return <div>{device.label}</div>;\n              })}\n            <div>Switch Camera</div>\n          </SwitchList>\n        )}\n\n        <SwitchMenu onClick={handleToggling}>\n          <i className='fas fa-angle-up'></i>\n        </SwitchMenu>\n\n        <CameraButton onClick={toggleCameraAudio} data-switch='audio'>\n          <div>\n            {userVideoAudio.audio ? (\n              <FaIcon className='fas fa-microphone'></FaIcon>\n            ) : (\n              <FaIcon className='fas fa-microphone-slash'></FaIcon>\n            )}\n          </div>\n          Audio\n        </CameraButton>\n\n      </Left>\n      \n      {/* Central components- screen share, chat buttons */}\n      <Center>\n\n        <ChatButton onClick={openChat}>\n          <div>\n            <FaIcon className='fas fa-comments'></FaIcon>\n          </div>\n          Chat\n        </ChatButton>\n\n        <ScreenButton onClick={startScreenSharing}>\n          <div>\n            <FaIcon\n              className={`fas fa-desktop ${screenShare ? 'sharing' : ''}`}\n            ></FaIcon>\n          </div>\n          Share Screen\n        </ScreenButton>\n\n      </Center>\n\n      {/* Right side components- Leave meet button */}\n      <Right>\n        <StopButton onClick={goToBack}>Leave</StopButton>\n      </Right>\n\n    </Bar>\n  );\n};\n\n//-------------------------------------------------------------------------------\n// Styled Components:\n\nconst FaIcon = styled.i`\n  width: 30px;\n  font-size: calc(16px + 1vmin);\n`;\n\nconst Bar = styled.div`\n  position: absolute;\n  width: 100%;\n  height: 10%;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: 500;\n  background-color: #6264a7;\n`;\n\nconst Left = styled.div`\n  display: flex;\n  align-items: center;\n  margin-left: 15px;\n`;\n\nconst Center = styled.div`\n  flex: 1;\n  display: flex;\n  justify-content: center;\n`;\n\nconst Right = styled.div``;\n\nconst CameraButton = styled.div`\n  position: relative;\n  width: 90px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #8F92F3;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  .fa-microphone-slash {\n    color: #ee2560;\n  }\n\n  .fa-video-slash {\n    color: #ee2560;\n  }\n`;\n\nconst SwitchMenu = styled.div`\n  display: flex;\n  position: absolute;\n  width: 20px;\n  top: 7px;\n  left: 80px;\n  z-index: 1;\n\n  :hover {\n    background-color: #476d84;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n\n  > i {\n    width: 90%;\n    font-size: calc(10px + 1vmin);\n  }\n`;\n\nconst ChatButton = styled.div`\n  width: 75px;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #8F92F3;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  * {\n    pointer-events: none;\n  }\n`;\n\nconst ScreenButton = styled.div`\nalign-content: center;  \n  width: auto;\n  border: none;\n  font-size: 0.9375rem;\n  padding: 5px;\n\n  :hover {\n    background-color: #8F92F3;\n    cursor: pointer;\n    border-radius: 15px;\n  }\n\n  .sharing {\n    color: #ee2560;\n  }\n`;\n\nconst StopButton = styled.div`\n  font-size: 0.9375rem;\n  line-height: 30px;  \n  width: 75px;\n  height: 30px;\n  border: none;\n  text-align: center;\n  margin-right: 15px;\n  border-radius: 15px;\n  background-color: orange;\n  \n  :hover {\n    background-color: #f25483;\n    cursor: pointer;\n  }\n`;\n\nconst SwitchList = styled.div`\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: -115px;\n  left: 80px;\n  padding-top: 5px;\n  padding-right: 10px;\n  padding-bottom: 5px;\n  padding-left: 10px;\n  text-align: left;\n  background-color: #4ea1d3;\n  color: white;\n\n  > div {\n    font-size: 0.85rem;\n    padding: 1px;\n    margin-bottom: 5px;\n\n    :not(:last-child):hover {\n      background-color: #77b7dd;\n      cursor: pointer;\n    }\n  }\n\n  > div:last-child {\n    border-top: 1px solid white;\n    cursor: context-menu !important;\n  }\n`;\n\nexport default BottomBar;\n","//imports\nimport React, { useEffect, useState, useRef } from 'react';\nimport styled from 'styled-components';\nimport socket from '../../socket';\n//------------------------------------------------------------------------------\n\nconst Chat = ({ display, roomId }) => {\n  const currentUser = sessionStorage.getItem('user');\n  const [msg, setMsg] = useState([]);\n  const messagesEndRef = useRef(null);\n  const inputRef = useRef();\n\n  // when a new message is received\n  useEffect(() => {\n    socket.on('message-received', ({ msg, sender }) => {\n      setMsg((msgs) => [...msgs, { sender, msg }]);\n    });\n  }, []);\n\n\n  useEffect(() => { scrollToBottom() }, [msg])\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n  }\n\n  // when a message is sent\n  const sendMessage = (e) => {\n    if (e.key === 'Enter') {\n      const msg = e.target.value;\n\n      if (msg) {\n        socket.emit('message-sent', { roomId, msg, sender: currentUser });\n        inputRef.current.value = '';\n      }\n    }\n  };\n\n  return (\n    // Display chat window only when the chat button is clicked\n    <ChatContainer className={display ? '' : 'width0'}>\n\n      <Titlebox>Chat Room</Titlebox>\n\n      <ChatWindow>\n        {/* Section where all the sent messages are displayed */}\n        <MessageList>\n          {msg &&\n            msg.map(({ sender, msg }, idx) => {\n              if (sender !== currentUser) {\n                return (\n                  <Message key={idx}>\n                    <strong>{sender}</strong>\n                    <p>{msg}</p>\n                  </Message>\n                );\n              } else {\n                return (\n                  <UserMessage key={idx}>\n                    <strong>{sender}</strong>\n                    <p>{msg}</p>\n                  </UserMessage>\n                );\n              }\n            })}\n\n          <div style={{ float: 'left', clear: 'both' }} ref={messagesEndRef} />\n        </MessageList>\n\n      </ChatWindow>\n\n      {/* input box where message can be typed */}\n      <InputArea\n        ref={inputRef}\n        onKeyUp={sendMessage}\n        placeholder=\"Enter your message\"\n      />\n\n    </ChatContainer>\n  );\n};\n\n// -------------------------------------------------------------------------\n// Styled Components:\n\nconst ChatContainer = styled.div`\n  background-color: #d1d1f5;\n  display: flex;\n  flex-direction: column;\n  width: 30%;\n  hieght: 100%;\n  transition: all 0.5s ease;\n  overflow: hidden;\n`;\n\nconst ChatWindow = styled.div`\n  width: 100%;\n  height: 83%;\n  max-height: 83%;\n  overflow-x: hidden;\n  overflow-y: auto;\n`;\n\nconst Titlebox = styled.div`\n  width: 100%;\n  text-align: center;\n  margin-top: 15px;\n  font-weight: 600;\n  font-size: 20px;\n  color: black;\n`;\n\nconst Message = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-size: 16px;\n  margin-top: 15px;\n  margin-left: 15px;\n  text-align: left;\n\n  > strong {\n    margin-left: 3px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    box-shadow: 0px 0px 3px #6264a7;\n    font-size: 14px;\n  }\n`;\n\nconst MessageList = styled.div`\n  display: flex;\n  width: 100%;\n  color: #454552;\n  flex-direction: column;\n  padding: 15px;\n`;\n\nconst UserMessage = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  width: 100%;\n  font-size: 16px;\n  margin-top: 15px;\n  text-align: right;\n\n  > strong {\n    margin-right: 35px;\n  }\n\n  > p {\n    max-width: 65%;\n    width: auto;\n    padding: 9px;\n    margin-top: 3px;\n    margin-right: 30px;\n    border: 1px solid rgb(78, 161, 211, 0.3);\n    border-radius: 15px;\n    background-color: #6264a7;\n    color: white;\n    font-size: 14px;\n    text-align: left;\n  }\n`;\n\nconst InputArea = styled.input`\n  bottom: 0;\n  width: 100%;\n  height: 8%;\n  padding: 15px;\n  border-top: 1px solid rgb(69, 69, 82, 0.25);\n  box-sizing: border-box;\n  opacity: 0.7;\n\n  :focus {\n    outline: none;\n  }\n`;\n\nexport default Chat;\n","//imports\nimport React, { useState, useEffect, useRef } from 'react';\nimport Peer from 'simple-peer';\nimport styled from 'styled-components';\nimport socket from '../../socket';\nimport UpperBar from '../UpperBar/UpperBar';\nimport VideoCard from '../Video/VideoCard';\nimport BottomBar from '../BottomBar/BottomBar';\nimport Chat from '../Chat/Chat';\n//--------------------------------------------------------------------------------\n\nconst MeetRoom = (props) => {\n  const currentUser = sessionStorage.getItem('user');\n  const [peers, setPeers] = useState([]);\n  const [userVideoAudio, setUserVideoAudio] = useState({\n    localUser: { video: true, audio: true },\n  });\n  const [videoDevices, setVideoDevices] = useState([]);\n  const [displayChat, setDisplayChat] = useState(false);\n  const [screenShare, setScreenShare] = useState(false);\n  const [showVideoDevices, setShowVideoDevices] = useState(false);\n  const peersRef = useRef([]);\n  const userVideoRef = useRef();\n  const screenTrackRef = useRef();\n  const userStream = useRef();\n  const roomId = props.match.params.roomId;\n\n  useEffect(() => {\n\n    navigator.mediaDevices.enumerateDevices().then((devices) => {\n      const filtered = devices.filter((device) => device.kind === 'videoinput');\n      setVideoDevices(filtered);\n    });\n\n    window.addEventListener('popstate', goToBack);\n\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        userVideoRef.current.srcObject = stream;\n        userStream.current = stream;\n\n        // user joins room\n        socket.emit('room-joined', { roomId, userName: currentUser });\n        socket.on('user-joined', (users) => {\n\n          const peers = [];\n          users.forEach(({ userId, info }) => {\n            let { userName, video, audio } = info;\n\n            if (userName !== currentUser) {\n              const peer = createPeer(userId, socket.id, stream);\n\n              peer.userName = userName;\n              peer.peerID = userId;\n\n              peersRef.current.push({\n                peerID: userId,\n                peer,\n                userName,\n              });\n              peers.push(peer);\n\n              setUserVideoAudio((preList) => {\n                return {\n                  ...preList,\n                  [peer.userName]: { video, audio },\n                };\n              });\n            }\n          });\n\n          setPeers(peers);\n        });\n\n\n        socket.on('receiving-call', ({ signal, from, info }) => {\n          let { userName, video, audio } = info;\n          const peerIdx = findPeer(from);\n\n          if (!peerIdx) {\n            const peer = addPeer(signal, from, stream);\n\n            peer.userName = userName;\n\n            peersRef.current.push({\n              peerID: from,\n              peer,\n              userName: userName,\n            });\n            setPeers((users) => {\n              return [...users, peer];\n            });\n            setUserVideoAudio((preList) => {\n              return {\n                ...preList,\n                [peer.userName]: { video, audio },\n              };\n            });\n          }\n        });\n\n\n        socket.on('accept-call', ({ signal, answerId }) => {\n          const peerIdx = findPeer(answerId);\n          peerIdx.peer.signal(signal);\n        });\n\n\n        // when user leaves the meeting\n        socket.on('user-left', ({ userId, userName }) => {\n          const peerIdx = findPeer(userId);\n          peerIdx.peer.destroy();\n          setPeers((users) => {\n            users = users.filter((user) => user.peerID !== peerIdx.peer.peerID);\n            return [...users];\n          });\n        });\n      });\n\n\n      // toggling video-audio on-off\n    socket.on('toggled-camera', ({ userId, switchTarget }) => {\n      const peerIdx = findPeer(userId);\n\n      setUserVideoAudio((preList) => {\n        let video = preList[peerIdx.userName].video;\n        let audio = preList[peerIdx.userName].audio;\n\n        if (switchTarget === 'video') video = !video;\n        else audio = !audio;\n\n        return {\n          ...preList,\n          [peerIdx.userName]: { video, audio },\n        };\n      });\n    });\n\n\n    return () => {\n      socket.disconnect();\n    };\n\n  }, []);\n\n\n  function createPeer(userId, caller, stream) {\n    const peer = new Peer({\n      initiator: true,\n      trickle: false,\n      stream,\n    });\n\n    peer.on('signal', (signal) => {\n      socket.emit('call-user', {\n        userToCall: userId,\n        from: caller,\n        signal,\n      });\n    });\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n\n    return peer;\n  }\n\n\n  function addPeer(incomingSignal, callerId, stream) {\n    const peer = new Peer({\n      initiator: false,\n      trickle: false,\n      stream,\n    });\n\n    peer.on('signal', (signal) => {\n      socket.emit('call-accepted', { signal, to: callerId });\n    });\n\n    peer.on('disconnect', () => {\n      peer.destroy();\n    });\n\n    peer.signal(incomingSignal);\n\n    return peer;\n  }\n\n\n  function findPeer(id) {\n    return peersRef.current.find((p) => p.peerID === id);\n  }\n\n\n  function createUserVideo(peer, index, arr) {\n    return (\n      <VideoWindow\n        className={`width-peer${peers.length > 8 ? '' : peers.length}`}\n        onClick={expandScreen}\n        key={index}\n      >\n        {writeUserName(peer.userName)}\n        <FaIcon className='fas fa-expand' />\n        <VideoCard key={index} peer={peer} number={arr.length} />\n      </VideoWindow>\n    );\n  }\n\n\n  // displays usernames on users window if their video is turned off\n  function writeUserName(userName, index) {\n    if (userVideoAudio.hasOwnProperty(userName)) {\n      if (!userVideoAudio[userName].video) {\n        return <UserName key={userName}>{userName}</UserName>;\n      }\n    }\n  }\n\n\n  // display chat window when chat button is pressed\n  const openChat = (e) => {\n    e.stopPropagation();\n    setDisplayChat(!displayChat);\n  };\n\n\n  // return the user back to home page when leave button is pressed\n  const goToBack = (e) => {\n    e.preventDefault();\n    socket.emit('leaving-room', { roomId, leaver: currentUser });\n    sessionStorage.removeItem('user');\n    window.location.href = '/';\n  };\n\n\n  const toggleCameraAudio = (e) => {\n    const target = e.target.getAttribute('data-switch');\n\n    setUserVideoAudio((preList) => {\n      let videoSwitch = preList['localUser'].video;\n      let audioSwitch = preList['localUser'].audio;\n\n      if (target === 'video') {\n        const userVideoTrack = userVideoRef.current.srcObject.getVideoTracks()[0];\n        videoSwitch = !videoSwitch;\n        userVideoTrack.enabled = videoSwitch;\n      } else {\n        const userAudioTrack = userVideoRef.current.srcObject.getAudioTracks()[0];\n        audioSwitch = !audioSwitch;\n\n        if (userAudioTrack) {\n          userAudioTrack.enabled = audioSwitch;\n        } else {\n          userStream.current.getAudioTracks()[0].enabled = audioSwitch;\n        }\n      }\n\n      return {\n        ...preList,\n        localUser: { video: videoSwitch, audio: audioSwitch },\n      };\n    });\n\n    socket.emit('toggling-camera-audio', { roomId, switchTarget: target });\n  };\n\n  // when screen share button is pressed\n  const startScreenSharing = () => {\n    if (!screenShare) {\n      navigator.mediaDevices\n        .getDisplayMedia({ cursor: true })\n        .then((stream) => {\n          const screenTrack = stream.getTracks()[0];\n\n          peersRef.current.forEach(({ peer }) => {\n            \n            peer.replaceTrack(\n              peer.streams[0]\n                .getTracks()\n                .find((track) => track.kind === 'video'),\n              screenTrack,\n              userStream.current\n            );\n          });\n\n          // Listen for click on end\n          screenTrack.onended = () => {\n            peersRef.current.forEach(({ peer }) => {\n              peer.replaceTrack(\n                screenTrack,\n                peer.streams[0]\n                  .getTracks()\n                  .find((track) => track.kind === 'video'),\n                userStream.current\n              );\n            });\n            userVideoRef.current.srcObject = userStream.current;\n            setScreenShare(false);\n          };\n\n          userVideoRef.current.srcObject = stream;\n          screenTrackRef.current = screenTrack;\n          setScreenShare(true);\n        });\n    } else {\n      screenTrackRef.current.onended();\n    }\n  };\n\n  // full screen view when user clicks on video window\n  const expandScreen = (e) => {\n    const elem = e.target;\n\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      /* Firefox */\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      /* Chrome, Safari & Opera */\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      /* IE/Edge */\n      elem.msRequestFullscreen();\n    }\n  };\n\n  const clickBackground = () => {\n    if (!showVideoDevices) return;\n\n    setShowVideoDevices(false);\n  }\n\n  return (\n    <RoomContainer onClick={clickBackground}>\n\n      <VideoAndBarContainer>\n\n        <UpperBar MeetTitle={roomId} MemberCount={`${peers.length + 1}`} />\n\n        <VideoContainer>\n\n          <VideoWindow\n            className={`width-peer${peers.length > 8 ? '' : peers.length}`}\n          >\n            {userVideoAudio['localUser'].video ? null : (\n              <UserName>{currentUser}</UserName>\n            )}\n            <FaIcon className='fas fa-expand' />\n            <MyVideo\n              onClick={expandScreen}\n              ref={userVideoRef}\n              muted\n              autoPlay\n              playInline\n            ></MyVideo>\n          </VideoWindow>\n\n          {peers &&\n            peers.map((peer, index, arr) => createUserVideo(peer, index, arr))}\n        </VideoContainer>\n\n        <BottomBar\n          startScreenSharing={startScreenSharing}\n          openChat={openChat}\n          goToBack={goToBack}\n          toggleCameraAudio={toggleCameraAudio}\n          userVideoAudio={userVideoAudio['localUser']}\n          screenShare={screenShare}\n          videoDevices={videoDevices}\n          showVideoDevices={showVideoDevices}\n          setShowVideoDevices={setShowVideoDevices}\n        />\n\n      </VideoAndBarContainer>\n\n      <Chat display={displayChat} roomId={roomId} />\n\n    </RoomContainer>\n  );\n};\n\n//---------------------------------------------------------------------------------------------------\n// styled components:\n\nconst FaIcon = styled.i`\n  display: none;\n  position: absolute;\n  right: 15px;\n  top: 15px;\n`;\n\nconst RoomContainer = styled.div`\n  display: flex;\n  width: 100%;\n  max-height: 100vh;\n  flex-direction: row;\n  background-color: #f0f0f0;\n`;\n\nconst VideoAndBarContainer = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100vh;\n`;\n\nconst VideoContainer = styled.div`\n  max-width: 100%;\n  height: 86%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  flex-wrap: wrap;\n  align-items: center;\n  padding: 15px;\n  box-sizing: border-box;\n  gap: 10px;\n`;\n\nconst MyVideo = styled.video``;\n\nconst VideoWindow = styled.div`\n  justify-content: center;\n  align-items: center;  \n  position: relative;\n  display: flex;\n  \n  > video {\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n\n  :hover {\n    > i {\n      display: block;\n    }\n  }\n`;\n\nconst UserName = styled.div`\n  position: absolute;\n  font-size: calc(20px + 5vmin);\n  z-index: 1;\n`;\n\nexport default MeetRoom;\n","//imports\nimport React from 'react';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom';\nimport Main from './components/Home/Home';\nimport Room from './components/MeetRoom/MeetRoom'\n//-----------------------------------------------------------------------\n\nfunction App() {\n  return (\n    <BrowserRouter>\n     \n        <Switch>\n          <Route exact path=\"/\" component={Main} />\n          <Route exact path=\"/room/:roomId\" component={Room} />\n        </Switch>\n  \n    </BrowserRouter>\n  );\n}\n\n\nexport default App;\n","//imports\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//-------------------------------------------------------\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}